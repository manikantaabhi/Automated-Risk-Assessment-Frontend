<div class="title-container">
  <h1>Automatic Risk Assessment and Mitigation Tool</h1>
</div>

<div class="wrapper">
  <div class="signup-container">
    <h1 class="form-title text-center mb-3">Signup</h1>

    <form [formGroup]="signupForm" (ngSubmit)="onSubmit()">

      <div class="form-group">
        <div class="input-group">
          <span class="input-group-text"><i class="fas fa-user"></i></span>
          <input type="text" class="form-control" id="firstName" formControlName="firstName" placeholder="First Name">
        </div>
        <p class="text-danger small mt-1" *ngIf="hasError('firstName', 'required')">First Name is required</p>
        <p class="text-danger small mt-1" *ngIf="hasError('firstName', 'minlength')">First Name must be at least 3 characters</p>
        <p class="text-danger small mt-1" *ngIf="hasError('firstName', 'pattern')">No numbers allowed</p>
      </div>

      <div class="form-group">
        <div class="input-group">
          <span class="input-group-text"><i class="fas fa-user"></i></span>
          <input type="text" class="form-control" id="lastName" formControlName="lastName" placeholder="Last Name">
        </div>
        <p class="text-danger small mt-1" *ngIf="hasError('lastName', 'required')">Last Name is required</p>
        <p class="text-danger small mt-1" *ngIf="hasError('lastName', 'pattern')">No numbers allowed</p>
      </div>

      <div class="form-group">
        <div class="input-group">
          <span class="input-group-text"><i class="fas fa-envelope"></i></span>
          <input type="email" class="form-control" id="email" formControlName="email" placeholder="Email">
        </div>
        <p class="text-danger small mt-1" *ngIf="hasError('email', 'required')">Email is required</p>
        <p class="text-danger small mt-1" *ngIf="hasError('email', 'email')">Invalid email format</p>
      </div>

      <div class="form-group">
        <div class="input-group">
          <span class="input-group-text"><i class="fas fa-user"></i></span>
          <input type="text" class="form-control" id="username" formControlName="username" placeholder="Username">
        </div>
        <p class="text-danger small mt-1" *ngIf="hasError('username', 'required')">Username is required</p>
        <p class="text-danger small mt-1" *ngIf="hasError('username', 'pattern')">Username must contain at least one alphabet and can only contain alphabets and numbers</p>
      </div>

      <div class="form-group">
        <div class="input-group">
          <span class="input-group-text"><i class="fas fa-lock"></i></span>
          <input [type]="showPassword ? 'text' : 'password'" class="form-control" id="password" formControlName="password" placeholder="Password">
          <span class="input-group-text toggle-password border-0" (click)="togglePassword()">
            <i class="fas" [ngClass]="showPassword ? 'fa-eye-slash' : 'fa-eye'"></i>
          </span>
        </div>
        <p class="text-danger small mt-1" *ngIf="hasError('password', 'required')">Password is required</p>
        <p class="text-danger small mt-1" *ngIf="hasError('password', 'minlength')">At least 8 characters</p>
      </div>

      <div class="form-group">
        <div class="input-group">
          <span class="input-group-text"><i class="fas fa-lock"></i></span>
          <input [type]="showConfirmPassword ? 'text' : 'password'" class="form-control" id="confirmPassword" formControlName="confirmPassword" placeholder="Re-enter Password">
          <span class="input-group-text toggle-password border-0" (click)="toggleConfirmPassword()">
            <i class="fas" [ngClass]="showConfirmPassword ? 'fa-eye-slash' : 'fa-eye'"></i>
          </span>
        </div>
        <p class="text-danger small mt-1" *ngIf="hasError('confirmPassword', 'required')">Please re-enter your password</p>
        <p class="text-danger small mt-1" *ngIf="signupForm.errors?.['passwordMismatch']">Passwords do not match</p>
      </div>

      <div class="form-group">
        <div class="input-group">
          <span class="input-group-text"><i class="fas fa-building"></i></span>
          <input type="text" class="form-control" id="organization" formControlName="organization" placeholder="Organization (Optional)">
        </div>
      </div>

      <div class="text-center mt-4">
        <button type="submit" class="btn btn-green w-50" [disabled]="signupForm.invalid">Sign Up</button>
      </div>

      <p class="text-center mt-3">
        Already have an account?
        <button type="button" class="btn btn-outline-primary w-50 mt-2" (click)="onLogin()">Login</button>
      </p>
    </form>

    <div class="mt-3 text-center">
      <p *ngIf="responseMessage" class="text-danger">{{ responseMessage }}</p>
    </div>
  </div>
</div>
